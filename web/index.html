<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Dominiate</title>
  <link rel="stylesheet" href="libs/bootstrap-mod.css">
  <link rel="stylesheet" href="dominiate.css">
</head>
<body>

<div id="masthead">
  <h1>dominiate</h1>
  <h2 class="tagline">A simulator for Dominion strategies.</h2>
</div>

<div id="p1">
<h2>Player 1</h2>
<div class="status" id="status1"></div>
<pre id="editor-left">{
    name: 'SimpleMoney'
    buyPriority: (state) -&gt; [
        "Province"
        "Gold"
        "Silver"
    ]
}</pre>
</div>

<div id="p2">
<h2>Player 2</h2>
<div class="status" id="status2"></div>
<pre id="editor-right">{
    name: 'SimpleMoney'
    buyPriority: (state) -&gt; [
        "Province"
        "Gold"
        "Silver"
    ]
}</pre>
</div>

<script src="libs/ace/src/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="libs/ace/src/theme-dawn.js" type="text/javascript" charset="utf-8"></script>
<script src="libs/ace/src/mode-coffee.js" type="text/javascript" charset="utf-8"></script>
<script src="libs/coffee-script.js" type="text/javascript" charset="utf-8"></script>
<script src="libs/jquery-1.6.3.min.js" type="text/javascript" charset="utf-8"></script>
<script src="libs/zeroTimeout.js" type="text/javascript" charset="utf-8"></script>
<script type="text/coffeescript">
$ = jQuery
$ ->
  window.editors = []
  for box in ["editor-left", "editor-right"]
    editor = ace.edit(box)
    editor.setTheme("ace/theme/dawn")
      
    JavaScriptMode = require("ace/mode/coffee").Mode;
    editor.getSession().setMode(new JavaScriptMode())
    
    editor.setShowPrintMargin(false)
    window.editors.push(editor)
 
  leftEd = window.editors[0].getSession()
  rightEd = window.editors[1].getSession()

  leftEd.on 'change', ->
    val = leftEd.getValue()
    try
      compiled = CoffeeScript.compile(val)
      # do something with it
      $('#status1').text('')
    catch e
      $('#status1').text(e.toString())

  rightEd.on 'change', ->
    val = rightEd.getValue()
    try
      compiled = CoffeeScript.compile(val)
      # do something with it
      $('#status2').text('')
    catch e
      $('#status2').text(e.toString())

</script>

</body>
</html>
